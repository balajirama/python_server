

{% macro showflashes(alert_type='alert-danger', category=['error']) -%}
    {% with errors = get_flashed_messages(category_filter=category) %}
    {% for message in errors %}
    <div class="alert {{alert_type}}" role="alert">
        {{ message }}
        <button type="button" class="close" data-dismiss="alert" aria-label="Close">
            <span aria-hidden="true">&times;</span>
        </button>
    </div>
    {% endfor %}
    {% endwith %}
{%- endmacro %}


{% macro inputfield(name, label, value='', type='text', placeholder='', small_text=None) -%}
    {% set input_id = 'input_' + name %}
    <div class="form-group">
        <label>{{label}}</label>
        {{ showflashes(category=[name]) }}
        <input type="{{type}}" class="form-control" id="{{input_id}}" name="{{name}}" placeholder="{{placeholder}}" value="{{value}}">
        {% if small_text != None %}<small class='form-text text-muted'>{{small_text}}</small>{% endif %}
    </div>
{%- endmacro %}

{% macro nice_card(header='Header', title='Title', footer='Footer', img=None, width=None) -%}
    {% if width != None %}
        {% set style_str = "width: " + width + ";" %}
    {% endif %}
    <div class="card text-center" style="{{style_str}}">
        <div class="card-header">{{header}}</div>
        {% if img != None -%}
        <img src="{{img['src']}}" class="card-img-top" alt="{{img['alt']}}">
        {%- endif %}
        <div class="card-body">
            <h5 class="card-title">{{title}}</h5>
            {{ caller() }}
        </div>
        <div class="card-footer text-muted">{{footer}}</div>
    </div>
{%- endmacro %}

{% macro nice_table(header=['#', 'First', 'Second', 'Third'], data=[[1, 'First 1', 'Second 1', 'Third 1'], [2, 'First 2', 'Second 2', 'Third 2']]) -%}
    <table class="table table-striped">
        <thead class="thead-light">
            <tr>
                {% for colheader in header -%}
                <th scope="col">{{colheader}}</th>
                {%- endfor %}
            </tr>
        </thead>
        <tbody>
            {% for row in data -%}
            <tr>
                {% for i in range(row|length) -%}
                    {% if i == 0 -%}
                        <th scope="row">{{row[i]}}</th>
                    {%- else %}
                        <td>{{row[i]}}</td>
                    {%- endif %}
                {%- endfor %}
            </tr>
            {%- endfor %}
        </tbody>
    </table>
{%- endmacro %}
